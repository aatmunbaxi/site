<!DOCTYPE html>
<html><head lang="en"><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge"><title>A meow-state for speedy org structure navigation - Aatmun Baxi</title><meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="TL;DR: We implement a meow-state for quick navigation of org-mode document structure.
I&rsquo;ve been very pleased with my switch to the meow modal editor, but one of the downsides of it is no obvious way to use speed keys in org-mode. Namely, the meow normal state maps would clash with the speed key definitions. One could just redefine the speed keys to avoid the normal state maps, or redefine the normal state maps themselves, but that&rsquo;s no fun." />
	<meta property="og:image" content=""/>
	<meta property="og:url" content="http://localhost:1313/comp/meow_state_org_speed/">
  <meta property="og:site_name" content="Aatmun Baxi">
  <meta property="og:title" content="A meow-state for speedy org structure navigation">
  <meta property="og:description" content="TL;DR: We implement a meow-state for quick navigation of org-mode document structure.
I’ve been very pleased with my switch to the meow modal editor, but one of the downsides of it is no obvious way to use speed keys in org-mode. Namely, the meow normal state maps would clash with the speed key definitions. One could just redefine the speed keys to avoid the normal state maps, or redefine the normal state maps themselves, but that’s no fun.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="comp">
    <meta property="article:published_time" content="2024-07-05T00:00:00+00:00">
    <meta property="article:modified_time" content="2024-07-05T00:00:00+00:00">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="A meow-state for speedy org structure navigation">
  <meta name="twitter:description" content="TL;DR: We implement a meow-state for quick navigation of org-mode document structure.
I’ve been very pleased with my switch to the meow modal editor, but one of the downsides of it is no obvious way to use speed keys in org-mode. Namely, the meow normal state maps would clash with the speed key definitions. One could just redefine the speed keys to avoid the normal state maps, or redefine the normal state maps themselves, but that’s no fun.">

	
        <link href="http://localhost:1313/css/fonts.2c2227b81b1970a03e760aa2e6121cd01f87c88586803cbb282aa224720a765f.css" rel="stylesheet">
	

	
	<link rel="stylesheet" type="text/css" media="screen" href="http://localhost:1313/css/main.ac08a4c9714baa859217f92f051deb58df2938ec352b506df655005dcaf98cc0.css" />

	
	
		<script type="text/javascript"
		src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
		</script>
	
		
		<script type="text/x-mathjax-config">
		MathJax.Hub.Config({
			tex2jax: {
				inlineMath: [['$','$'], ['\\(','\\)']],
				displayMath: [['$$','$$'], ['\[','\]']],
				processEscapes: true,
				processEnvironments: true,
				skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
				TeX: { equationNumbers: { autoNumber: "AMS" },
						 extensions: ["AMSmath.js", "AMSsymbols.js"] }
			}
		});
		</script>
	

	
	
	
	
		
		
		<link rel="stylesheet" type="text/css" href="http://localhost:1313/css/modus_style.4717ee2590524fe42e9e105227b8cfdded2bf8ecb4290e25c9919fefce5f1a70.css">
		
</head>
<body>
        <div class="content"><header>
	<div class="main">
		<a href="http://localhost:1313/">Aatmun Baxi</a>
	</div>
	<nav>
		
		<a href="/comp/">Computing</a>
		
		<a href="/math/">Math</a>
		
		<a href="/misc/">Misc</a>
		
		<a href="/nihongo/">日本語コーナー</a>
		
		
	</nav>
</header>

<main>
	<article>
		<div class="title">
			<h1 class="title">A meow-state for speedy org structure navigation</h1>
			<div class="meta">Posted on Jul 5, 2024</div>
		</div>
		

		<section class="body">
			<p><em>TL;DR: We implement a <code>meow-state</code> for quick navigation of <code>org-mode</code> document structure.</em></p>
<p>I&rsquo;ve been very pleased with my switch to the <code>meow</code> modal editor, but one of the downsides of it is no obvious way to use <a href="https://orgmode.org/manual/Speed-Keys.html">speed keys</a> in <code>org-mode</code>.
Namely, the meow normal state maps would clash with the speed key definitions.
One could just redefine the speed keys to avoid the normal state maps, or redefine the normal state maps themselves, but that&rsquo;s no fun.</p>
<p>In the words of Mickey Petersen, org speed keys offer a kind of &ldquo;transient modality&rdquo; to default emacs keybindings.
But meow is <em>already</em> a modal editing scheme, there&rsquo;s no benefit that I can see to making speed keys a transient behavior, especially with how much I use org-mode.</p>
<p>We take a different approach and define our own <code>meow-state</code> to navigate org structure.
Meow offers excellent support for defining your own states.
For those who use evil, this like the user being able to define a different mode under which we can edit and navigate, much like <code>evil-normal-state</code> and <code>evil-visual-state</code>.
Like evil, each <code>meow-state</code> has its own set of keybindings that call specific functions.
We will define a state <code>meow-org-motion-state</code> that will be used for navigating org documents.
Doing so is shockingly simple; most of the code is lifted directly from <a href="https://github.com/meow-edit/meow/blob/master/CUSTOMIZATIONS.org">the meow customization documentation.</a></p>
<p>The entire code in defining the state is this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span style="display:flex;"><span>(setq meow-org-motion-keymap (<span style="color:#a6e22e">make-keymap</span>))
</span></span><span style="display:flex;"><span>(meow-define-state org-motion
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;Org-mode structural motion&#34;</span>
</span></span><span style="display:flex;"><span>  :lighter <span style="color:#e6db74">&#34;[O]&#34;</span>
</span></span><span style="display:flex;"><span>  :keymap meow-org-motion-keymap)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>(meow-define-keys <span style="color:#e6db74">&#39;org-motion</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#39;</span>(<span style="color:#e6db74">&#34;&lt;escape&gt;&#34;</span> <span style="color:#f92672">.</span> meow-normal-mode)
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#39;</span>(<span style="color:#e6db74">&#34;i&#34;</span> <span style="color:#f92672">.</span> meow-insert-mode)
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#39;</span>(<span style="color:#e6db74">&#34;g&#34;</span> <span style="color:#f92672">.</span> meow-normal-mode)
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#39;</span>(<span style="color:#e6db74">&#34;u&#34;</span> <span style="color:#f92672">.</span>  meow-undo)
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">;; Moving between headlines</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#39;</span>(<span style="color:#e6db74">&#34;k&#34;</span> <span style="color:#f92672">.</span>  org-previous-visible-heading)
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#39;</span>(<span style="color:#e6db74">&#34;j&#34;</span> <span style="color:#f92672">.</span>  org-next-visible-heading)
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">;; Moving between headings at the same level</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#39;</span>(<span style="color:#e6db74">&#34;p&#34;</span> <span style="color:#f92672">.</span>  org-backward-heading-same-level)
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#39;</span>(<span style="color:#e6db74">&#34;n&#34;</span> <span style="color:#f92672">.</span>  org-forward-heading-same-level)
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">;; Moving subtrees themselves</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#39;</span>(<span style="color:#e6db74">&#34;K&#34;</span> <span style="color:#f92672">.</span>  org-subtree-up)
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#39;</span>(<span style="color:#e6db74">&#34;J&#34;</span> <span style="color:#f92672">.</span>  org-subtree-down)
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">;; Subtree de/promotion</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#39;</span>(<span style="color:#e6db74">&#34;L&#34;</span> <span style="color:#f92672">.</span>  org-demote-subtree)
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#39;</span>(<span style="color:#e6db74">&#34;H&#34;</span> <span style="color:#f92672">.</span>  org-promote-subtree)
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">;; Completion-style search of headings</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#39;</span>(<span style="color:#e6db74">&#34;v&#34;</span> <span style="color:#f92672">.</span>  consult-org-heading)
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">;; Setting subtree metadata</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#39;</span>(<span style="color:#e6db74">&#34;l&#34;</span> <span style="color:#f92672">.</span>  org-set-property)
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#39;</span>(<span style="color:#e6db74">&#34;t&#34;</span> <span style="color:#f92672">.</span>  org-todo)
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#39;</span>(<span style="color:#e6db74">&#34;d&#34;</span> <span style="color:#f92672">.</span>  org-deadline)
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#39;</span>(<span style="color:#e6db74">&#34;s&#34;</span> <span style="color:#f92672">.</span>  org-schedule)
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#39;</span>(<span style="color:#e6db74">&#34;e&#34;</span> <span style="color:#f92672">.</span>  org-set-effort)
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">;; Block navigation</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#39;</span>(<span style="color:#e6db74">&#34;b&#34;</span> <span style="color:#f92672">.</span>  org-previous-block)
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#39;</span>(<span style="color:#e6db74">&#34;f&#34;</span> <span style="color:#f92672">.</span>  org-next-block)
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">;; Narrowing/widening</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#39;</span>(<span style="color:#e6db74">&#34;N&#34;</span> <span style="color:#f92672">.</span>  org-narrow-to-subtree)
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#39;</span>(<span style="color:#e6db74">&#34;W&#34;</span> <span style="color:#f92672">.</span>  <span style="color:#a6e22e">widen</span>))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>(meow-define-keys <span style="color:#e6db74">&#39;normal</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#39;</span>(<span style="color:#e6db74">&#34;O&#34;</span> <span style="color:#f92672">.</span> meow-org-motion-mode))
</span></span></code></pre></div><p>Whilst being easy to define, this configuration is also very easy to read.
Every keymap is self explanatory.
In particular, we implement meow-style up-down nagivation of subtrees with <code>jk</code>, and add level-restricted motion with <code>np</code>.
Subtree metadata can be edited from this state without exiting the state, and source block navigation is added&ndash;useful for literate programmers.</p>
<p>There&rsquo;s one major benefit to using a custom <code>meow-state</code> instead of attempting to get speed keys working: <strong>this state is available anywhere in the buffer.</strong>
With speed keys, the point <strong>must</strong> be at the beginning of an org heading.
With our custom state, a simple press of <code>O</code> while in <code>meow-normal-mode</code> puts us in navigation mode.
This makes navigation of org documents fast and accessible in a way that is superior to speed keys, something afforded to us by adopting a modal editing paradigm.</p>
<p>A demo of this mode is given below; you can see the keys pressed in the tab-line.
Feel free to extend and/or modify the key definitions to your liking.
You can check the value of <code>org-speed-commands</code> for inspiration.</p>
<figure><img src="/ox-hugo/meow-org-motion.gif"
    alt="Figure 1: Demo of our org-motion state"><figcaption>
      <p><span class="figure-number">Figure 1: </span>Demo of our org-motion state</p>
    </figcaption>
</figure>


		</section>

		<div class="post-tags">
			
			
			<nav class="nav tags">
				<ul class="tags">
					
					<li><a href="/tags/emacs">emacs</a></li>
					
					<li><a href="/tags/meow">meow</a></li>
					
				</ul>
			</nav>
			
			
		</div>
		</article>
</main>
<footer>
  <div style="display:flex"></div>
  <div class="footer-info">
    2024  <a
      href="https://github.com/athul/archie">Archie Theme</a> | Built with <a href="https://gohugo.io">Hugo</a>
  </div>
</footer>
</div>
    </body>
</html>
